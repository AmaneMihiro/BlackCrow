C251 COMPILER V5.60.0,  debug                                                              27/05/25  18:37:09  PAGE 1   


C251 COMPILER V5.60.0, COMPILATION OF MODULE debug
OBJECT MODULE PLACED IN .\Out_File\debug.obj
COMPILER INVOKED BY: d:\Keil_v5\C251\BIN\C251.EXE ..\USER\src\debug.c XSMALL INTR2 WARNINGLEVEL(3) OPTIMIZE(5,SPEED) BRO
                    -WSE INCDIR(..\..\Libraries\libraries;..\..\Libraries\seekfree_libraries;..\..\Libraries\seekfree_peripheral;..\CODE;..\U
                    -SER\inc;..\USER\src;..\..\vofa+) DEBUG PRINT(.\Out_File\debug.lst) OBJECT(.\Out_File\debug.obj) 

stmt  level    source

    1          #include "debug.h"
    2          #include "math.h"
    3          /*************************Ê¹ï¿½ï¿½Ëµï¿½ï¿½****************************************
    4          ï¿½ï¿½Ð­ï¿½ï¿½ï¿½ë¡°Visual Scopeï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ð­ï¿½ï¿½ï¿½ï¿½Ý£ï¿½ï¿½Ã¹ï¿½ï¿½Ä¿ï¿½ï¿½ï¿½Ö±ï¿½ï¿½ï¿½ï¿½
             -Ô­ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Î»ï¿½ï¿½Ð­ï¿½é¼´ï¿½ï¿½
    5          ï¿½×´ï¿½Ê¹ï¿½ï¿½Ê±ï¿½ï¿½
    6          1.ï¿½ï¿½ï¿½ï¿½outputdata.cï¿½ï¿½ï¿½Í¡ï¿½outputdata.hï¿½ï¿½ï¿½ï¿½ï¿½Óµï¿½ï¿½ï¿½Ä¹ï¿½ï¿½ï¿½ï¿½ï¿½
    7          2.ï¿½Ú¡ï¿½outputdata.cï¿½ï¿½ï¿½Ð°ï¿½ï¿½ï¿½ï¿½ï¿½Ô­ï¿½ï¿½ï¿½ï¿½Ä´ï¿½ï¿½Ú·ï¿½ï¿½Íºï¿½ï¿½ï¿½Í·ï¿½Ä¼ï¿½
    8          3.ï¿½ï¿½uart_putchar(databuf[i]);ï¿½ï¿½ï¿½ï¿½æ»»Îªï¿½ï¿½Ä´ï¿½ï¿½ï¿½ï¿½Ö½Ú·ï¿½ï¿½Íºï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½se
             -nd_char(databuf[i]);
    9          4.ï¿½ï¿½ï¿½ï¿½Ä³ï¿½ï¿½ï¿½ï¿½ï¿½Òªï¿½ï¿½ï¿½Í²ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ýµï¿½.cï¿½Ä¼ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ó°ï¿½ï¿½ï¿½ï¿
             -½ï¿½#include "outputdata.h"ï¿½ï¿½ï¿½ï¿½ï¿½Ú±ï¿½ï¿½Ä¼ï¿½ï¿½Ðµï¿½ï¿½Ãºï¿½ï¿½ï¿½OutPut_Data(x,y,z,w);
   10            ï¿½ï¿½ï¿½ï¿½ï¿½Î²ï¿½xï¿½ï¿½yï¿½ï¿½zï¿½ï¿½wï¿½ï¿½ï¿½Ç´ï¿½ï¿½ï¿½ï¿½Ä¸ï¿½short int 16Î»ï¿½ï¿½ï¿½Ý£ï¿½ï¿½Ö±
             -ï¿½ï¿½Ó¦Í¨ï¿½ï¿½1,2,3,4
   11          ************************************************************************/
   12          // ï¿½Ë´ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ä´ï¿½ï¿½ï¿½Í·ï¿½Ä¼ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï
             -¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½
   13          #include "zf_uart.h"
   14          //****************************ï¿½ï¿½Ö²**************************//
   15          
   16          void Data_Send(UARTN_enum uratn, signed short int *pst)
   17          {
   18   1          unsigned char _cnt = 0;
   19   1          unsigned char sum = 0;
   20   1          unsigned char data_to_send[23] = {0}; // ï¿½ï¿½ï¿½Í»ï¿½ï¿½ï¿½
   21   1          unsigned char i;
   22   1          data_to_send[_cnt++] = 0xAA;
   23   1          data_to_send[_cnt++] = 0xAA;
   24   1          data_to_send[_cnt++] = 0x02;
   25   1          data_to_send[_cnt++] = 0;
   26   1          data_to_send[_cnt++] = (unsigned char)(pst[0] >> 8); // ï¿½ï¿½8Î»
   27   1          data_to_send[_cnt++] = (unsigned char)pst[0];        // ï¿½ï¿½8Î»
   28   1          data_to_send[_cnt++] = (unsigned char)(pst[1] >> 8);
   29   1          data_to_send[_cnt++] = (unsigned char)pst[1];
   30   1          data_to_send[_cnt++] = (unsigned char)(pst[2] >> 8);
   31   1          data_to_send[_cnt++] = (unsigned char)pst[2];
   32   1          data_to_send[_cnt++] = (unsigned char)(pst[3] >> 8);
   33   1          data_to_send[_cnt++] = (unsigned char)pst[3];
   34   1          data_to_send[_cnt++] = (unsigned char)(pst[4] >> 8);
   35   1          data_to_send[_cnt++] = (unsigned char)pst[4];
   36   1          data_to_send[_cnt++] = (unsigned char)(pst[5] >> 8);
   37   1          data_to_send[_cnt++] = (unsigned char)pst[5];
   38   1          data_to_send[_cnt++] = (unsigned char)(pst[6] >> 8);
   39   1          data_to_send[_cnt++] = (unsigned char)pst[6];
   40   1          data_to_send[_cnt++] = (unsigned char)(pst[7] >> 8);
   41   1          data_to_send[_cnt++] = (unsigned char)pst[7];
   42   1          data_to_send[_cnt++] = (unsigned char)(pst[8] >> 8);
   43   1          data_to_send[_cnt++] = (unsigned char)pst[8];
   44   1      
   45   1          data_to_send[3] = _cnt - 4;
   46   1      
   47   1          sum = 0;
   48   1          for (i = 0; i < _cnt; i++)
   49   1              sum += data_to_send[i];
   50   1      
   51   1          data_to_send[_cnt++] = sum;
   52   1      
C251 COMPILER V5.60.0,  debug                                                              27/05/25  18:37:09  PAGE 2   

   53   1          for (i = 0; i < _cnt; i++)
   54   1              uart_putchar(uratn, data_to_send[i]);
   55   1      }
   56          
   57          //===================================================ï¿½ï¿½Î»ï¿½ï¿½ï¿½ï¿½Øµï¿½===========================
             -===============================
   58          //=======================================================================================================
             -===============
   59          /****************ï¿½ï¿½ï¿½Ý´ï¿½ï¿½ï¿½******************
   60          ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½void datasend()
   61          ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½  ï¿½ï¿½
   62          Ëµï¿½ï¿½ï¿½ï¿½ ï¿½ï¿½ï¿½ï¿½Í¬Ê±ï¿½ï¿½ï¿½ï¿½6ï¿½ï¿½ï¿½ï¿½  icm_gyro_x   icm_acc_x ICM_Real.gyro.y  ICM_Rea
             -l.acc.z
   63          ï¿½ï¿½ï¿½ï¿½ï¿½Ä±ï¿½ï¿½ï¿½ï¿½ï¿½icm_acc_x  icm_gyro_y  Angle  adc_date[0] Left_Adc
   64          
   65          ï¿½ï¿½ï¿½ï¿½Öµï¿½ï¿½ï¿½ï¿½
   66          ï¿½ï¿½ï¿½Ú£ï¿½
   67          ï¿½ï¿½ï¿½ß£ï¿½  */
   68          void datasend()
   69          {
   70   1          short send_data[6];
   71   1      
   72   1          send_data[0] = aim_speed;        // left_speed; ////////ICM_Start.acc.x
   73   1          send_data[1] = left_real_speed;  // right_speed; //////////////////    MpuStart.gyro.x   Angle
   74   1          send_data[2] = aim_speed;        //////////
   75   1          send_data[3] = right_real_speed; // imu660ra_gyro_z; //
   76   1          send_data[4] = 0;                // GORY_Z;
   77   1          send_data[5] = 0;
   78   1          // Data_Send(UART_4,send_data);
   79   1          Data_Send(UART_User, send_data);
   80   1      }
   81          
   82          float StrToDouble(const char *s)
   83          {
   84   1          int i = 0;
   85   1          int k = 0;
   86   1          float j;
   87   1          int flag = 1;
   88   1          float result = 0.0;
   89   1          if (s[i] == '+')
   90   1          {
   91   2              i++;
   92   2          }
   93   1          if (s[i] == '-')
   94   1          {
   95   2              i++;
   96   2              flag = -1;
   97   2          }
   98   1          while (s[i] != '\0' && s[i] != '.')
   99   1          {
  100   2              j = (s[i] - '0') * 1.0;
  101   2              result = result * 10 + j;
  102   2              i++;
  103   2          }
  104   1          if (s[i] == '.')
  105   1          {
  106   2              i++;
  107   2              while (s[i] != '\0' && s[i] != ' ')
  108   2              {
  109   3                  k++;
  110   3                  j = s[i] - '0';
  111   3                  result = result + (1.0 * j) / pow(10.0, k);
  112   3                  i++;
  113   3              }
  114   2          }
  115   1          result = flag * result;
C251 COMPILER V5.60.0,  debug                                                              27/05/25  18:37:09  PAGE 3   

  116   1          return result;
  117   1      }
  118          
  119          void extern_iap_write_float(double dat, uint8 num, uint8 pointnum, uint16 addr)
  120          {
  121   1          uint8 length;
  122   1          int8 buff[34];
  123   1          int8 start, end, point;
  124   1      
  125   1          if (0 > dat)
  126   1              length = zf_sprintf(&buff[0], "%f", dat); // ï¿½ï¿½ï¿½ï¿½
  127   1          else
  128   1          {
  129   2              length = zf_sprintf(&buff[1], "%f", dat);
  130   2              length++;
  131   2          }
  132   1          point = length - 7;         // ï¿½ï¿½ï¿½ï¿½Ð¡ï¿½ï¿½ï¿½ï¿½Î»ï¿½ï¿½
  133   1          start = point - num - 1;    // ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ê¼Î»
  134   1          end = point + pointnum + 1; // ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Î»
  135   1          while (0 > start)           // ï¿½ï¿½ï¿½ï¿½Î»ï¿½ï¿½ï¿½ï¿½  Ä©Î²Ó¦ï¿½ï¿½ï¿½ï¿½ï¿½Õ¸ï¿½
  136   1          {
  137   2              buff[end] = ' ';
  138   2              end++;
  139   2              start++;
  140   2          }
  141   1      
  142   1          if (0 > dat)
  143   1              buff[start] = '-';
  144   1          else
  145   1              buff[start] = '+';
  146   1      
  147   1          buff[end] = '\0';
  148   1      
  149   1          extern_iap_write_bytes(addr, (uint8 *)buff, num + pointnum + 3);
  150   1      }
  151          
  152          float iap_read_float(uint8 len, uint16 addr)
  153          {
  154   1          uint8 buf[34];
  155   1          iap_read_bytes(addr, buf, len);
  156   1      
  157   1          return StrToDouble(buf);
  158   1      }
  159          
  160          void EEROM_CanshuInit() // PIDï¿½ï¿½Ê¼ï¿½ï¿½
  161          {
  162   1          // ï¿½ï¿½eepromÐ´ï¿½ï¿½ï¿½ï¿½ï¿½Ý£ï¿½ï¿½ï¿½Ð´ï¿½ï¿½ï¿½Ê±ï¿½ï¿½ÇµÃ°Ñ²ï¿½ï¿½ï¿½eepromï¿½ï¿½ï¿½ï¿½ï¿½ï¿½
  163   1          //  extern_iap_write_float(30,3,1,0x00);//(30,3,1,0x00)ï¿½Ðµï¿½30ï¿½ï¿½ï¿½ï¿½ÒªÐ´ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½
             -3ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Î»ï¿½ï¿½1ï¿½ï¿½ï¿½ï¿½Ð¡ï¿½ï¿½Î»ï¿½ï¿½ï¿½ï¿½ä»°ï¿½ï¿½ï¿½ï¿½Ë¼ï¿½Ç°ï¿½30×ªï¿½ï¿½Îª"+030.0"ï¿½ï¿½ï
             -¿½ï¿½0x00-0x06ï¿½ï¿½Ö·ï¿½Ð£ï¿½ï¿½ï¿½Îª"+030.0"Õ¼ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ö·ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ö·ï¿½ï¿½ï¿½ï¿½Ä½ï¿½ï¿½ï¿½ï¿½Ö·ï
             -¿½'/0'ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Õ¼ï¿½ï¿½ï¿½ß¸ï¿½ï¿½ï¿½Ö·ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½0x00ï¿½ï¿½0x06,ï¿½Â¸ï¿½ï¿½ï¿½ï¿½ï¿½Òªï¿½ï¿½ï¿½Ôµ
             -ï¿½0x07Îªï¿½ï¿½Ê¼ï¿½ï¿½Ö·ï¿½ï¿½
  164   1          //  extern_iap_write_float(15,3,1,0x07);
  165   1          //  extern_iap_write_float(11000,5,1,0x0e);
  166   1          //  extern_iap_write_float(315,4,1,0x17);
  167   1          //  extern_iap_write_float(2.0,1,1,0x1f);
  168   1          //  extern_iap_write_float(1.5,1,1,0x24);
  169   1          //  extern_iap_write_float(680,3,1,0x29);
  170   1      
  171   1          // ï¿½ï¿½eepromï¿½Ð¶ï¿½È¡ï¿½ï¿½ï¿½Ý£ï¿½ï¿½ÇµÃ²ï¿½Òªï¿½Ñ²ï¿½ï¿½ï¿½eepromï¿½ï¿½ï¿½ï¿½ï¿½ï¿½
  172   1          // SpeedPID.Kp=iap_read_float(7,0x00);
  173   1          // iap_read_bytes(0x00,SpeedPID.Kp,2);
  174   1          // TurnPID.Ki=iap_read_float(7,0x0e);
  175   1          //  TurnPID.Kp= iap_read_float(7,0x00);//ï¿½ï¿½ä»°ï¿½ï¿½ï¿½ï¿½Ë¼ï¿½Ç´ï¿½0x00ï¿½ï¿½Ö·ï¿½ï¿½Ê¼È¡ï¿½ï¿½7ï
             -¿½ï¿½ï¿½ï¿½Ö·ï¿½ï¿½ï¿½ï¿½ï¿½Ý£ï¿½Ò²ï¿½ï¿½ï¿½ï¿½0x00ï¿½ï¿½0x06ï¿½ï¿½
  176   1          //  TurnPID.Ki = iap_read_float(7,0x07);
C251 COMPILER V5.60.0,  debug                                                              27/05/25  18:37:09  PAGE 4   

  177   1          //  TurnPID.Kd = iap_read_float(9,0x0e);
  178   1          // iap_read_bytes(0x00,(uint16 *)"350",2); //aim_speed=
  179   1          //  MotorPID.I = iap_read_float(8,0x17);
  180   1          //  Stright=iap_read_float(5,0x1f);
  181   1          //  Curve=iap_read_float(5,0x24);
  182   1          //  pout0=iap_read_float(7,0x29);
  183   1      }
  184          //====================================================ï¿½ï¿½Ä»ï¿½ï¿½Øµï¿½=(ï¿½ï¿½É¾ï¿½ï¿½)===============
             -==============================================
  185          //=======================================================================================================
             -=====================
  186          // sprintf(temp," date20=%d",date);
  187          // TFTSPI_P8X8Str(0,19,temp,BLACK,WHITE);break;
  188          
  189          //==========================================================ï¿½ï¿½ï¿½ë¿ªï¿½Ø¼ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½====
             -=====================================================
  190          //=======================================================================================================
             -=============================
  191          
  192          // ï¿½ï¿½ï¿½ë¿ªï¿½ï¿½ï¿½ï¿½ï¿½Åºê¶¨ï¿½ï¿½
  193          #define Switch_Pin_1 P75
  194          #define Switch_Pin_2 P76
  195          #define Switch_Pin_3 P11
  196          #define Switch_Pin_4 P61
  197          #define Switch_Pin_5 P14
  198          #define Switch_Pin_6 P15
  199          // ï¿½ï¿½ï¿½å°´ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½
  200          #define KEY1 P70
  201          #define KEY2 P71
  202          #define KEY3 P72
  203          #define KEY4 P73
  204          
  205          //***************ï¿½ï¿½ï¿½ï¿½ï¿½ê¶¨ï¿½ï¿½****(ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ð©ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Þ¸Äºê¶¨ï¿½ï¿½Îªï¿½
             -ï¿½Ó¦ï¿½ï¿½GPIOï¿½âº¯ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½)***********
  206          #define KEY_INT(key_x) gpio_pull_set(key_x, PULLUP)          // ï¿½ï¿½ï¿½ï¿½Îªï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½
  207          #define SWITCH_INT(switch_x) gpio_pull_set(switch_x, PULLUP) // ï¿½ï¿½ï¿½ï¿½Îªï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½
  208          #define READ_GPIO(Pin_X) Pin_X
  209          #define TiaoCan_DelayMs(M_S) delay_ms(M_S) // ï¿½ï¿½Ê±
  210          
  211          unsigned char TiaoCan = 0;                                                                  /////////////
             -///////////ï¿½ï¿½ï¿½Î±ï¿½Ö¾Î»
  212          unsigned char TFT_SHOW = 0;                                                                 /////////////
             -//////////ï¿½ï¿½Ä»ï¿½ï¿½ï¿½ï¿½
  213          unsigned char Switch1 = 0, Switch2 = 0, Switch3 = 0, Switch4 = 0, Switch5 = 0, Switch6 = 0; // ï¿½ï¿½ï¿½ï
             -¿½
  214          char parameter = 0;                                                                         // ï¿½ï¿½ï¿½ï
             -¿½Ñ¡ï¿½ï¿½
  215          
  216          // ï¿½ï¿½ï¿½ï¿½×´Ì¬ï¿½ï¿½ï¿½ï¿½
  217          uint8 key1_status = 1, key2_status = 1, key3_status = 1, key4_status = 1, key5_status = 1;
  218          // ï¿½ï¿½Ò»ï¿½Î¿ï¿½ï¿½ï¿½×´Ì¬ï¿½ï¿½ï¿½ï¿½
  219          uint8 key1_last_status, key2_last_status, key3_last_status, key4_last_status, key5_last_status;
  220          // ï¿½ï¿½ï¿½Ø±ï¿½Ö¾Î»
  221          uint8 key1_flag = 0, key2_flag = 0, key3_flag = 0, key4_flag = 0, key5_flag = 0;
  222          /*****************ï¿½ï¿½ï¿½ë¿ªï¿½Ø¼ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ê¼ï¿½ï¿½*****************
  223          ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½void Switch_Key_init()
  224          ï¿½ï¿½ï¿½Ü£ï¿½ï¿½ï¿½Ê¼ï¿½ï¿½IO
  225          ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½  ï¿½ï¿½
  226          Ëµï¿½ï¿½ï¿½ï¿½ ï¿½ï¿½Ê¼ï¿½ï¿½IOï¿½ï¿½   gpio_init(D1, GPI, GPIO_HIGH, GPI_PULL_UP); GPO_PUSH_PULL
  227          ï¿½ï¿½ï¿½ï¿½Öµï¿½ï¿½ï¿½ï¿½*/
  228          void Switch_Key_init()
  229          {
  230   1      
  231   1          // ï¿½ï¿½ï¿½ë¿ªï¿½Ø³ï¿½Ê¼ï¿½ï¿½  ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Þ¸Ä£ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Þ¸Ä£ï¿½
  232   1          SWITCH_INT(Switch_Pin_1);
  233   1          SWITCH_INT(Switch_Pin_2);
C251 COMPILER V5.60.0,  debug                                                              27/05/25  18:37:09  PAGE 5   

  234   1          SWITCH_INT(Switch_Pin_3);
  235   1          SWITCH_INT(Switch_Pin_4);
  236   1          SWITCH_INT(Switch_Pin_5);
  237   1          SWITCH_INT(Switch_Pin_6);
  238   1      
  239   1          // ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ê¼ï¿½ï¿½ ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Þ¸Ä£ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Þ¸Ä£ï¿½
  240   1          KEY_INT(KEY1);
  241   1          KEY_INT(KEY2);
  242   1          KEY_INT(KEY3);
  243   1          KEY_INT(KEY4);
  244   1      }
  245          
  246          /*****************ï¿½ï¿½ï¿½ë¿ªï¿½Ø²ï¿½ï¿½ï¿½Ñ¡ï¿½ï¿½*****************
  247          ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½void Strategy_Slect()
  248          ï¿½ï¿½ï¿½Ü£ï¿½Í¨ï¿½ï¿½ï¿½ï¿½ï¿½ë¿ªï¿½Øµï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½
  249          ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½  ï¿½ï¿½
  250          Ëµï¿½ï¿½ï¿½ï¿½  6Î»ï¿½ï¿½ï¿½ë¿ªï¿½Ø£ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ó»ï¿½ï¿½ß¼ï¿½ï¿½Ù¿É¶ï¿½ï¿½ï¿½ï¿½Þ¸ï¿½,ï¿½ï
             -¿½ï¿½ï¿½ï¿½ï¿½ï¿½6ï¿½ï¿½Ò²ï¿½ï¿½ÒªÉ¾ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ä£ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Å¸Ä¸ï¿½Ã»ï¿½ÃµÄ¼ï¿½ï¿½
             -ï¿½
  251                  Ê¹ï¿½ï¿½ï¿½ã¶¨ï¿½ï¿½Ä¾Íºï¿½ï¿½Ë£ï¿½ï¿½ï¿½ï¿½ï¿½Ã»ï¿½ï¿½ï¿½Ãµï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½
  252          ï¿½ï¿½ï¿½ï¿½Öµï¿½ï¿½ï¿½ï¿½*/
  253          void Strategy_Slect()
  254          {
  255   1          // ï¿½ï¿½È¡ï¿½ï¿½ï¿½ë¿ªï¿½ï¿½×´Ì¬
  256   1          if (!READ_GPIO(Switch_Pin_1)) // ï¿½ï¿½
  257   1          {
  258   2              Switch1 = 1;
  259   2              Annulus_selection = 1;
  260   2              //                       //ï¿½ï¿½Ê¾ï¿½ï¿½ï¿½Ô­Ê¼Öµ
  261   2              //                       ips114_showint16(0,0,adc_value[0]);
  262   2              //           ips114_showint16(0,1,adc_value[1]);
  263   2              //           ips114_showint16(0,2,adc_value[2]);
  264   2              //           ips114_showint16(0,3,adc_value[3]);
  265   2              //
  266   2              //                       //ï¿½ï¿½Ê¾ï¿½ï¿½Ð¹ï¿½Ò»ï¿½ï¿½Öµ
  267   2              //                       ips114_showuint8(80,0,Left_Adc);
  268   2              //           ips114_showuint8(80,1,Left_Shu_Adc);
  269   2              //           ips114_showuint8(80,2,Right_Shu_Adc);
  270   2              //           ips114_showuint8(80,3,Right_Adc);
  271   2              //
  272   2              //                       ips114_showfloat(0,5,Current_Dir,2,1);//ï¿½ï¿½Ê¾ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½   ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ê¾2Î
             -»   Ð¡ï¿½ï¿½ï¿½ï¿½Ê¾1Î»
  273   2              //
  274   2              //                       ips114_showint16(130,0,left_speed);
  275   2              //         ips114_showint16(130,1,right_speed);
  276   2          }
  277   1          if (!READ_GPIO(Switch_Pin_2)) // ï¿½ï¿½
  278   1          {
  279   2              Switch2 = 1;
  280   2              Library_selection = 2; // ï¿½ï¿½ï¿½ï¿½Ñ¡ï¿½ï¿½Library_selectionÄ¬ï¿½ï¿½Îª1ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½â£¬ï¿
             -½ï¿½ï¿½Âºï¿½ï¿½ï¿½2ï¿½ï¿½ï¿½Ò³ï¿½ï¿½ï¿½
  281   2          }
  282   1          if (!READ_GPIO(Switch_Pin_3))
  283   1          {
  284   2              Switch3 = 1;
  285   2          }
  286   1          if (!READ_GPIO(Switch_Pin_4))
  287   1          {
  288   2              Switch4 = 1;
  289   2          }
  290   1          if (!READ_GPIO(Switch_Pin_5))
  291   1          {
  292   2              Switch5 = 1;
  293   2          }
  294   1          if (!READ_GPIO(Switch_Pin_6))
  295   1          {
C251 COMPILER V5.60.0,  debug                                                              27/05/25  18:37:09  PAGE 6   

  296   2              Switch6 = 1;
  297   2          }
  298   1      }
  299          
  300          /*****************ï¿½ï¿½ï¿½ï¿½É¨ï¿½ï¿½ï¿½È¡*****************
  301          ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½void  Key_Scan_Deal ()
  302          ï¿½ï¿½ï¿½Ü£ï¿½ï¿½ï¿½È¡ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ö´ï¿½Ð¶ï¿½Ó¦ï¿½ï¿½ï¿½ï¿½
  303          ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½  ï¿½ï¿½
  304          Ëµï¿½ï¿½ï¿½ï¿½ ï¿½Î¿ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ ï¿½ï¿½5Î»ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ó»ï¿½ï¿½ß
             -¼ï¿½ï¿½Ù¿É¶ï¿½ï¿½ï¿½ï¿½Þ¸ï¿½
  305                // 1ï¿½ï¿½Îªï¿½ï¿½ï¿½Æ¼ï¿½ï¿½ï¿½2ï¿½ï¿½Îªï¿½Ï¼ï¿½ï¿½ï¿½3ï¿½ï¿½Îªï¿½ï¿½ï¿½Æ¼ï¿½ï¿½ï¿½4ï¿½ï¿½Îªï¿½Ð¼ï
             -¿½ï¿½Ì£ï¿½5ï¿½ï¿½Îªï¿½Â¼ï¿½
  306               //ï¿½ï¿½ï¿½Î³ï¿½ï¿½ï¿½Ã»ï¿½ï¿½Ê¹ï¿½Ãµï¿½ï¿½Î£ï¿½stcï¿½ï¿½Æ¬ï¿½ï¿½ï¿½ï¿½ï¿½Ø³ï¿½ï¿½ï¿½Ò²ï¿½ì£¬ï¿½ï¿½ï
             -¿½ï¿½ï¿½Õ¾Í¿ï¿½ï¿½Ô£ï¿½ï¿½ï¿½ï¿½Òªï¿½ÓµÄ»ï¿½ï¿½Ô¼ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ô¼ï¿½ï¿½Ó¾Í¿ï¿½ï¿½ï¿½
  307          ï¿½ï¿½ï¿½ï¿½Öµï¿½ï¿½ï¿½ï¿½     */
  308          uint8 gogo = 0;
  309          void Key_Scan_Deal()
  310          {
  311   1          while (gogo <= 2)
  312   1          {
  313   2              // Ê¹ï¿½Ã´Ë·ï¿½ï¿½ï¿½ï¿½Åµï¿½ï¿½ï¿½ï¿½Ú£ï¿½ï¿½ï¿½ï¿½ï¿½ÒªÊ¹ï¿½ï¿½while(1) ï¿½È´ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½
             -â´¦ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ô´ï¿½Ë·ï¿½
  314   2              // ï¿½ï¿½ï¿½æ°´ï¿½ï¿½×´Ì¬
  315   2              key1_last_status = key1_status;
  316   2              key2_last_status = key2_status;
  317   2              key3_last_status = key3_status;
  318   2              key4_last_status = key4_status;
  319   2              // ï¿½ï¿½È¡ï¿½ï¿½Ç°ï¿½ï¿½ï¿½ï¿½×´Ì¬
  320   2              key1_status = READ_GPIO(KEY1);
  321   2              key2_status = READ_GPIO(KEY2);
  322   2              key3_status = READ_GPIO(KEY3);
  323   2              key4_status = READ_GPIO(KEY4);
  324   2              // ï¿½ï¿½âµ½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ö®ï¿½ï¿½  ï¿½ï¿½ï¿½Å¿ï¿½ï¿½ï¿½Î»ï¿½ï¿½Ö¾Î»
  325   2              if (key1_status && !key1_last_status)
  326   2                  key1_flag = 1;
  327   2              if (key2_status && !key2_last_status)
  328   2                  key2_flag = 1;
  329   2              if (key3_status && !key3_last_status)
  330   2                  key3_flag = 1;
  331   2              if (key4_status && !key4_last_status)
  332   2                  key4_flag = 1;
  333   2              if (key5_status && !key5_last_status)
  334   2                  key5_flag = 1;
  335   2              // ï¿½ï¿½Ö¾Î»ï¿½ï¿½Î»Ö®ï¿½ó£¬¿ï¿½ï¿½ï¿½Ê¹ï¿½Ã±ï¿½Ö¾Î»Ö´ï¿½ï¿½ï¿½Ô¼ï¿½ï¿½ï¿½Òªï¿½ï¿½ï¿½ï¿½ï¿½Â¼ï¿½
  336   2      
  337   2              if (key1_flag) // S1ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½
  338   2              {
  339   3                  key1_flag = 0; // Ê¹ï¿½Ã°ï¿½ï¿½ï¿½Ö®ï¿½ï¿½Ó¦ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ö¾Î»
  340   3                  /*ï¿½ï¿½ï¿½ï¿½Îªï¿½Ã»ï¿½ï¿½ï¿½ï¿½ï¿½  */
  341   3                  switch (parameter)
  342   3                  {
  343   4                      //-----------------------ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Þ¸ï¿½ï¿½ï¿½ï¿½ï¿½--ï¿½ï¿½×¢ï¿½ï¿½ï¿½Þ¸Ä¶ï¿½
             -Ó¦ï¿½ï¿½ï¿½ï¿½Ê¾ï¿½ï¿½----------------------------------------------------------------
  344   4                      // ï¿½ï¿½Ò»Ò³ï¿½ï¿½Ê¾ï¿½Ä¶ï¿½ï¿½ï¿½
  345   4                  case 0:
  346   4                      TurnPID.Kp += 1;
  347   4                      break; // extern_iap_write_float(TurnPID.Kp,3,2,0x00);      break;
  348   4                  case 1:
  349   4                      TurnPID.Ki += 0.1;
  350   4                      break; // extern_iap_write_float(TurnPID.Ki,3,2,0x07);                   break;
  351   4                  case 2:
  352   4                      TurnPID.Kd += 0.1;
  353   4                      break; // extern_iap_write_float(TurnPID.Kd,3,2,0x0e);                   break;
  354   4                  case 3:;
  355   4                      TurnPID.K_gory += 1;
  356   4                      break;
C251 COMPILER V5.60.0,  debug                                                              27/05/25  18:37:09  PAGE 7   

  357   4                  case 4:;
  358   4                      break;
  359   4                  case 5:;
  360   4                      break;
  361   4                      /// case 6:  ; break;//ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ü¼ï¿½ï¿½ÎºÎ²ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ë£ï¿½ï
             -¿½ï¿½Ò³Ê¹ï¿½ï¿½ï¿½ï¿½ extern_iap_write_bytes(0x00,&aim_speed,2);
  362   4                      // ï¿½Ú¶ï¿½Ò³ï¿½ï¿½Ê¾ï¿½Ä¶ï¿½ï¿½ï¿½
  363   4                  case 7:
  364   4                      SpeedPID.Kp += 1;
  365   4                      break;
  366   4                  case 8:
  367   4                      SpeedPID.Ki += 0.1;
  368   4                      break;
  369   4                  case 9:
  370   4                      SpeedPID.Kd += 0.1;
  371   4                      break;
  372   4                  case 10:
  373   4                      aim_speed += 10;
  374   4                      break;
  375   4                  case 11:
  376   4                      break;
  377   4                  case 12:
  378   4                      break;
  379   4                      //--------------------ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Þ¸ï¿½ï¿½ï¿½ï¿½ï¿½-----------------------------
             --------------------------------------
  380   4                  }
  381   3              }
  382   2              if (key2_flag) // S2ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½
  383   2              {
  384   3                  key2_flag = 0; // Ê¹ï¿½Ã°ï¿½ï¿½ï¿½Ö®ï¿½ï¿½Ó¦ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ö¾Î»
  385   3                  /*  ï¿½ï¿½ï¿½ï¿½Îªï¿½Ã»ï¿½ï¿½ï¿½ï¿½ï¿½  */
  386   3                  switch (parameter)
  387   3                  {
  388   4                      //----------------------ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Þ¸ï¿½ï¿½ï¿½ï¿½ï¿½--ï¿½ï¿½×¢ï¿½ï¿½ï¿½Þ¸Ä¶ï¿½Ó
             -¦ï¿½ï¿½ï¿½ï¿½Ê¾ï¿½ï¿½--------------------------------------------------------------
  389   4                      // ï¿½ï¿½Ò»Ò³ï¿½ï¿½Ê¾ï¿½Ä¶ï¿½ï¿½ï¿½
  390   4                  case 0:
  391   4                      TurnPID.Kp -= 20;
  392   4                      break;
  393   4                  case 1:
  394   4                      TurnPID.Ki -= 5;
  395   4                      break;
  396   4                  case 2:
  397   4                      TurnPID.Kd -= 5;
  398   4                      break;
  399   4                  case 3:;
  400   4                      TurnPID.K_gory -= 5;
  401   4                      break;
  402   4                  case 4:;
  403   4                      break;
  404   4                  case 5:;
  405   4                      break;
  406   4                      // case 6:ips114_showstr(0,0,"FANYE_ing");  ; break;//ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ü¼ï¿½ï¿½ÎºÎ²ï¿½ï¿
             -½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ë£ï¿½ï¿½ï¿½Ò³Ê¹ï¿½ï¿½ï¿½ï¿½
  407   4                      // ï¿½Ú¶ï¿½Ò³ï¿½ï¿½Ê¾ï¿½Ä¶ï¿½ï¿½ï¿½
  408   4                  case 7:
  409   4                      SpeedPID.Kp -= 1;
  410   4                      break;
  411   4                  case 8:
  412   4                      SpeedPID.Ki -= 0.1;
  413   4                      break;
  414   4                  case 9:
  415   4                      SpeedPID.Kd -= 0.1;
  416   4                      break;
  417   4                  case 10:
  418   4                      aim_speed -= 50;
C251 COMPILER V5.60.0,  debug                                                              27/05/25  18:37:09  PAGE 8   

  419   4                      break;
  420   4                  case 11:
  421   4                      break;
  422   4                  case 12:
  423   4                      break;
  424   4                      //--------------------ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Þ¸ï¿½ï¿½ï¿½ï¿½ï¿½-----------------------------
             --------------------------------------
  425   4                  }
  426   3              }
  427   2              if (key3_flag) // S3ï¿½ï¿½ï¿½ï¿½Ñ¡ï¿½ï¿½ï¿½ï¿½ÎµÄ²ï¿½ï¿½ï¿½
  428   2              {
  429   3                  key3_flag = 0; // Ê¹ï¿½Ã°ï¿½ï¿½ï¿½Ö®ï¿½ï¿½Ó¦ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ö¾Î»
  430   3                  parameter++;
  431   3                  ips114_clear(WHITE);
  432   3                  if (parameter >= 11)
  433   3                      parameter = 0;
  434   3              }
  435   2              if (key4_flag) // S4ï¿½ï¿½ï¿½ï¿½È·ï¿½Ï°ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ë³ï¿½ï¿½ï¿½ï¿½ï¿½
  436   2              {
  437   3                  key4_flag = 0; // Ê¹ï¿½Ã°ï¿½ï¿½ï¿½Ö®ï¿½ï¿½Ó¦ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ö¾Î»
  438   3                  gogo++;
  439   3              }
  440   2              //*******************************ï¿½ï¿½Ä»ï¿½ï¿½Ê¾ï¿½ï¿½Ò»Ò³***********************
  441   2      
  442   2              if (parameter < 6) // ï¿½ï¿½Ê¾ï¿½ï¿½ï¿½ï¿½0ï¿½ï¿½5ï¿½ï¿½Êµï¿½ï¿½ï¿½ï¿½Ê¾1ï¿½ï¿½6
  443   2              {
  444   3                  ips114_showstr(0, parameter + 1, "->");
  445   3                  ips114_showstr(20, 0, "parameter->");
  446   3                  ips114_showint8(150, 0, parameter); // xÎªint8ï¿½ï¿½ï¿½ï¿½
  447   3                  // ï¿½ï¿½Ê¾ï¿½ï¿½ï¿½Î¹ï¿½ï¿½ï¿½   ï¿½Ðºï¿½ï¿½ï¿½ï¿½Ò»ï¿½ï¿½Îª9   Ö»ï¿½ï¿½ï¿½ï¿½Ê¾ï¿½ï¿½Ã´ï¿½à
             -£¬ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Â·ï¿½Ò³ï¿½ï¿½Ê¾  Ò»Ò³ï¿½ï¿½6ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½
  448   3                  ips114_showstr(20, 1, "TurnPID.Kp=");
  449   3                  ips114_showfloat(150, 1, TurnPID.Kp, 3, 2); // ï¿½ï¿½Ê¾ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½
  450   3                  ips114_showstr(20, 2, "TurnPID.Ki=");
  451   3                  ips114_showfloat(150, 2, TurnPID.Ki, 2, 2); // ï¿½ï¿½Ê¾ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½
  452   3                  ips114_showstr(20, 3, "TurnPID.Kd=");
  453   3                  ips114_showfloat(150, 3, TurnPID.Kd, 2, 2); // ï¿½ï¿½Ê¾ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½
  454   3                  ips114_showstr(20, 4, "TurnPID.K_gory=");
  455   3                  ips114_showint16(150, 4, TurnPID.K_gory);
  456   3              }
  457   2              //*******************************ï¿½ï¿½Ä»ï¿½ï¿½Ê¾ï¿½Ú¶ï¿½Ò³**************************************
             -************
  458   2              if (parameter > 6 && parameter < 11) // ï¿½ï¿½ï¿½ï¿½ï¿½ÐºÅ´ï¿½4ï¿½ï¿½9   Ò»Ò³ï¿½ï¿½6ï¿½ï¿½ï¿½ï¿½ï
             -¿½ï¿½  //ï¿½ï¿½Ê¾ï¿½ï¿½ï¿½ï¿½7ï¿½ï¿½5ï¿½ï¿½Êµï¿½ï¿½ï¿½ï¿½Ê¾7ï¿½ï¿½12
  459   2              {
  460   3                  ips114_showstr(0, parameter - 6, "->");
  461   3                  ips114_showstr(20, 0, "parameter->");
  462   3                  ips114_showint8(150, 0, parameter); // xÎªint8ï¿½ï¿½ï¿½ï¿½
  463   3                  // ï¿½ï¿½Ê¾ï¿½ï¿½ï¿½Î¹ï¿½ï¿½ï¿½   ï¿½Ðºï¿½ï¿½ï¿½ï¿½Ò»ï¿½ï¿½Îª9   Ö»ï¿½ï¿½ï¿½ï¿½Ê¾ï¿½ï¿½Ã´ï¿½à
             -£¬ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Â·ï¿½Ò³ï¿½ï¿½Ê¾  Ò»Ò³ï¿½ï¿½6ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½
  464   3                  ips114_showstr(20, 1, "SpeedPID.Kp=");
  465   3                  ips114_showfloat(150, 1, SpeedPID.Kp, 2, 2); // ï¿½ï¿½Ê¾ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½
  466   3                  ips114_showstr(20, 2, "SpeedPID.Ki=");
  467   3                  ips114_showfloat(150, 2, SpeedPID.Ki, 2, 2); // ï¿½ï¿½Ê¾ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½
  468   3                  ips114_showstr(20, 3, "SpeedPID.Kd=");
  469   3                  ips114_showfloat(150, 3, SpeedPID.Kd, 2, 2); // ï¿½ï¿½Ê¾ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½
  470   3                  ips114_showstr(20, 4, "aim_speed=");
  471   3                  ips114_showint16(150, 4, aim_speed);
  472   3                  //            ips114_showstr(20,5,"Turn_NeiPID.Ki=");ips114_showfloat(150,5,Turn_NeiPID.Ki,2,2);//ï¿½
             -ï¿½Ê¾ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½
  473   3                  //            ips114_showstr(20,6,"Turn_NeiPID.Kd=");ips114_showfloat(150,6,Turn_NeiPID.Kd,2,2);//ï¿½
             -ï¿½Ê¾ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½
  474   3              }
  475   2              //*******************************ï¿½ï¿½Ä»ï¿½ï¿½Ê¾ï¿½ï¿½ï¿½ï¿½Ò³**********************************
             -****************
  476   2              //    if(parameter>13&&parameter<20)
C251 COMPILER V5.60.0,  debug                                                              27/05/25  18:37:09  PAGE 9   

  477   2              //    {
  478   2              //
  479   2              //    }
  480   2              // ###########ï¿½ï¿½ï¿½ï¿½Òªï¿½ï¿½ï¿½ï¿½Ò³ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ð´ï¿½Í¿ï¿½ï¿½Ô¿ï¿½###################
             -###ï¿½ï¿½ï¿½ï¿½Í²ï¿½Ð´ï¿½ï¿½ ï¿½ï¿½ï¿½ï¿½
  481   2              if (parameter == 6 || parameter == 13 || parameter == 20) // ï¿½ï¿½Ò³×¼ï¿½ï¿½
  482   2              {
  483   3                  ips114_showstr(0, 0, "Ready to turn the page...");
  484   3                  ips114_showstr(0, 1, "Press the button to display ");
  485   3                  ips114_showstr(0, 2, "the second page...");
  486   3                  // ips114_clear(WHITE);
  487   3              } // ï¿½ï¿½ï¿½ï¿½
  488   2              if (gogo > 2)
  489   2              {
  490   3                  ips114_clear(WHITE);
  491   3              }
  492   2          }
  493   1      }
  494          //===============================================ï¿½ï¿½ï¿½Ô»ï¿½ï¿½ï¿½ï¿½ï¿½Ä»ï¿½ï¿½Ê¾====================
             -=========================
  495          //=======================================================================================================
             -=====
  496          /************************************************ï¿½ï¿½ï¿½Ô»ï¿½ï¿½ï¿½ï¿½ï¿½Ä»ï¿½ï¿½Ê¾********************
             -*************************
  497          ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½void Roundabout_debugshow(void)
  498          ï¿½ï¿½ï¿½Ü£ï¿½ï¿½ï¿½ï¿½Ô»ï¿½ï¿½ï¿½Ê±ï¿½ï¿½Ê¾ï¿½ï¿½Ó¦ï¿½Ä±ï¿½Ö¾Î»ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½
  499          ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½  ï¿½ï¿½
  500          Ëµï¿½ï¿½ï¿½ï¿½
  501          ï¿½ï¿½ï¿½ï¿½Öµï¿½ï¿½ï¿½ï¿½
  502          *********************************************************************************************************
             -*****/
  503          void Roundabout_debugshow(void)
  504          {
  505   1          ips114_showuint8(0, 0, Left_Adc);          // ï¿½ï¿½ï¿½ï¿½ï¿½Öµ
  506   1          ips114_showuint8(0, 1, Left_Shu_Adc);      // ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Öµ
  507   1          ips114_showuint8(0, 2, Right_Shu_Adc);     // ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Öµ
  508   1          ips114_showuint8(0, 3, Right_Adc);         // ï¿½Òºï¿½ï¿½ï¿½Öµ
  509   1          ips114_showfloat(0, 5, Current_Dir, 2, 1); // ï¿½ï¿½Ê¾ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½   ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ê¾2Î»   
             -Ð¡ï¿½ï¿½ï¿½ï¿½Ê¾1Î»
  510   1      
  511   1          ips114_showuint8(50, 0, road_type.annulus);         // ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ö¾Î»
  512   1          ips114_showint16(50, 1, annulus_s);                 // ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï
             -¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ö¾ï¿½ï¿½ï¿½
  513   1          ips114_showuint8(50, 2, road_type.in_annulus_left); // ï¿½ó»·µï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ç±ï¿½Ö¾Î»
  514   1          ips114_showint16(50, 3, annulus_z);                 // ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ç»ï¿½ï¿½Ö½
             -Ç¶ï¿½Öµ
  515   1          ips114_showint16(50, 4, annulus_s2);
  516   1          ips114_showuint8(50, 5, road_type.on_annulus_left); // ï¿½ï¿½ï¿½ó»·µï¿½ï¿½ï¿½Ö¾Î»ï¿½ï¿½ï¿½ï¿½ÎªÐ¡ï¿½ï
             -¿½ï¿½Ñ¾ï¿½ï¿½ë»·ï¿½ï¿½
  517   1          ips114_showuint8(50, 6, road_type.out_annulus);     // ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ö¾Î»
  518   1          ips114_showint16(50, 7, annulus_t);                 // ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ê±ï¿½ï¿½0Ê±ï¿½ï¿½
  519   1      
  520   1          ips114_showuint8(100, 0, road_type.annulus);          // ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ö¾Î»
  521   1          ips114_showint16(100, 1, annulus_s);                  // ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿
             -½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ö¾ï¿½ï¿½ï¿½
  522   1          ips114_showuint8(100, 2, road_type.in_annulus_right); // ï¿½ó»·µï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ç±ï¿½Ö¾Î»
  523   1          ips114_showint16(100, 3, annulus_z);                  // ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ç»ï¿½ï¿½
             -Ö½Ç¶ï¿½Öµ
  524   1          ips114_showuint8(100, 4, road_type.on_annulus_right); // ï¿½ï¿½ï¿½Ò»ï¿½ï¿½ï¿½ï¿½ï¿½Ö¾Î»ï¿½ï¿½ï¿½ï¿½Îª
             -Ð¡ï¿½ï¿½ï¿½Ñ¾ï¿½ï¿½ë»·ï¿½ï¿½
  525   1          ips114_showuint8(100, 5, road_type.out_annulus);      // ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ö¾Î»
  526   1          ips114_showint16(100, 6, annulus_t);                  // ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ê±ï¿½ï¿½0Ê±ï¿½ï¿½
  527   1      }
  528          
  529          //===============================================ï¿½ï¿½ï¿½ï¿½ï¿½Ù¶È»ï¿½Ä»ï¿½ï¿½Ê¾========================
             -=====================
C251 COMPILER V5.60.0,  debug                                                              27/05/25  18:37:09  PAGE 10  

  530          //=======================================================================================================
             -=====
  531          /************************************************ï¿½ï¿½ï¿½ï¿½ï¿½Ù¶È»ï¿½Ä»ï¿½ï¿½Ê¾************************
             -*********************
  532          ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Speed_debugshow(void)
  533          ï¿½ï¿½ï¿½Ü£ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ù¶È»ï¿½Ê±ï¿½ï¿½Ê¾ï¿½ï¿½Ó¦ï¿½ï¿½ï¿½Ò±ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Öµï¿½ï¿½ï¿½ï¿½ï¿½ï¿
             -½ï¿½ï¿½Ô£ï¿½ï¿½Ù¶È»ï¿½ï¿½Æ¼ï¿½ï¿½ï¿½ï¿½ï¿½Î»ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Îµï¿½ï¿½Ô£ï¿½
  534          ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½  ï¿½ï¿½
  535          Ëµï¿½ï¿½ï¿½ï¿½
  536          ï¿½ï¿½ï¿½ï¿½Öµï¿½ï¿½ï¿½ï¿½
  537          *********************************************************************************************************
             -*****/
  538          void Speed_debugshow(void)
  539          {
  540   1          ips114_showint16(0, 0, left_real_speed);  // ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Öµ
  541   1          ips114_showint16(0, 1, right_real_speed); // ï¿½Ò±ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Öµ
  542   1          ips114_showint16(0, 2, real_speed);       // ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Æ½ï¿½ï¿½Öµ
  543   1      }
  544          //===============================================ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½=============================
             -================
  545          //=====================================================================================================
  546          
  547          // ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Í¹ï¿½ ï¿½ï¿½Ð´ï¿½Ú¶ï¿½Ó¦Í·ï¿½Ä¼ï¿½È¥ï¿½Ë£ï¿½È¥Hï¿½Ä¼ï¿½ï¿½é¿´
  548          
  549          /*****************ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ÎµÎµï¿½*****************
  550          ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½void BUZZ_DiDiDi()
  551          ï¿½ï¿½ï¿½Ü£ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ÎµÎµï¿½
  552          ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½  ï¿½ï¿½
  553          Ëµï¿½ï¿½ï¿½ï¿½
  554          ï¿½ï¿½ï¿½ï¿½Öµï¿½ï¿½ï¿½ï¿½ */
  555          void BUZZ_DiDiDi(uint16 PinLV)
  556          {
  557   1          BUZZ_ON;
  558   1          TiaoCan_DelayMs(PinLV);
  559   1          BUZZ_OFF;
  560   1      }
  561          
  562          /***************************ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½**********************************************
  563           *  ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Æ£ï¿½Test_Servo(void)
  564           *  ï¿½ï¿½ï¿½ï¿½Ëµï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½PWMï¿½ï¿½Ê¼ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ô±ê¶¨ï¿½ï¿½ï¿½PWMï¿½ï¿½ï¿½ï¿½SD5/S
             -3010ï¿½ï¿½ï¿½
  565           *  ï¿½ï¿½ï¿½ï¿½Ëµï¿½ï¿½ï¿½ï¿½ï¿½ï¿½
  566           *  ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ø£ï¿½ï¿½ï¿½
  567           *  ï¿½Þ¸ï¿½Ê±ï¿½ä£º
  568           *  ï¿½ï¿½    ×¢ï¿½ï¿½ï¿½Î¿ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½á¹©ï¿½Ä£ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½
  569           ï¿½ï¿½×¢ï¿½ï¿½ï¿½ï¿½ï¿½î¡¿×¢ï¿½â£¬Ò»ï¿½ï¿½Òªï¿½Ô¶ï¿½ï¿½ï¿½ï¿½Ç½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½
  570           Ê¹ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ä¸ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ì£ï¿½
  571           1.ï¿½ï¿½Ê¹ï¿½ï¿½ï¿½ï¿½ï¿½Ã±ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Øµï¿½Ñ¹ï¿½ï¿½ï¿½ï¿½Ø±ï¿½Ö¤ï¿½ï¿½Øµï¿½Ñ¹ï¿½ï¿½7Vï¿½ï¿½ï¿½
             -Ï£ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ó¦ï¿½ï¿½
  572           2.È»ï¿½ï¿½È·ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ñ¹ï¿½ï¿½SD5ï¿½ï¿½ï¿½ï¿½ï¿½5Vï¿½ï¿½ï¿½ç£¬S3010ï¿½ï¿½6-7Vï¿½ï¿½ï
             -¿½ç£¬SD012ï¿½ï¿½ï¿½ï¿½ï¿½5Vï¿½ï¿½ï¿½ç£¡ï¿½ï¿½ï¿½ï¿½
  573           3.ï¿½Ñ¶ï¿½ï¿½ï¿½Ä¶ï¿½ï¿½ï¿½È¥ï¿½ï¿½ï¿½ï¿½ï¿½Ã¶ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½×ªï¿½ï¿½ï¿½ï¿½
  574           4.ï¿½ï¿½Ð´ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ð£ï¿½ï¿½Ã¶ï¿½ï¿½×ªï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Öµï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ã»ï¿½ï¿½
             -Ó¦ï¿½Ø¸ï¿½1-2ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ßµï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½PWMÆµï¿½Ê¼ï¿½Õ¼ï¿½Õ±È£ï¿½ï¿½ï¿½ï¿½Ü¿ï¿½Îª×¼ï¿½ï¿½
  575           5.ï¿½ï¿½ï¿½ï¿½Ü¿Øºï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½×ªï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ö¨Ö¨ï¿½ì£¬ï¿½Ô¿ï¿½×ªï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ê±ï¿
             -½ï¿½ï¿½ï¿½×°ï¿½Ï¶ï¿½ï¿½Ì£ï¿½
  576           6.ï¿½ï¿½ï¿½ï¿½K0/K1È·ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½×ªï¿½ï¿½ï¿½ï¿½ï¿½Þ£ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï
             -¿½ï¿½ï¿½Îªï¿½ï¿½ï¿½ï¿½ï¿½Þ·ï¿½ï¿½ï¿½Ö¹ï¿½ï¿½ï¿½ï¿½ï¿½×ªï¿½Õ»Ù£ï¿½
  577           *************************************************************************/
  578          void Test_Servo_Hardware(void)
  579          {
  580   1          char txt[16] = "X:";
  581   1          unsigned int duty = Steer_Duty_Midle;
  582   1      
  583   1          ips114_clear(YELLOW); // ï¿½ï¿½Ê¼ï¿½ï¿½ï¿½ï¿½
  584   1          ips114_showstr(0, 0, "Test_Servo_Hardware:");
C251 COMPILER V5.60.0,  debug                                                              27/05/25  18:37:09  PAGE 11  

  585   1          pwm_init(Steer_Pin, 50, Steer_Duty_Midle); // ï¿½ï¿½Ê¼ï¿½ï¿½ï¿½ï¿½ï¿½  ï¿½ï¿½ï¿½PWMÆµï¿½ï¿½200HZï¿½ï¿
             -½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Öµ
  586   1          pwm_duty(Steer_Pin, Steer_Duty_Midle);
  587   1          while (1)
  588   1          {
  589   2              if (!READ_GPIO(KEY1))
  590   2              {
  591   3                  if (duty > 100) // ï¿½ï¿½Ö¹dutyï¿½ï¿½
  592   3                  {
  593   4                      duty += 10; // ï¿½ê¶¨ï¿½ï¿½Ê±ï¿½ò£¬¿ï¿½ï¿½Ô°Ñ²ï¿½ï¿½ï¿½ï¿½ï¿½Ð¡ï¿½ã£¬ï¿½ï¿½ï¿½ï¿½10
  594   4                  }
  595   3              }
  596   2              if (!READ_GPIO(KEY3))
  597   2              {
  598   3                  duty = Steer_Duty_Midle;
  599   3              }
  600   2              if (!READ_GPIO(KEY2))
  601   2              {
  602   3                  duty -= 10;
  603   3              }
  604   2              pwm_duty(Steer_Pin, duty);
  605   2              sprintf(txt, "Servo:%05d ", duty);
  606   2              ips114_showstr(1, 2, txt); // ï¿½ï¿½Ê¾
  607   2              TiaoCan_DelayMs(100);
  608   2          }
  609   1      }
  610          
  611          /****************************ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½*********************************************
  612           *  ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Æ£ï¿½TestMotor(void)
  613           *  ï¿½ï¿½ï¿½ï¿½Ëµï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ô±ê¶¨ï¿½ï¿½ï¿½PWMï¿½ï¿½ï¿½Æµï¿½ï¿½
  614           *  ï¿½ï¿½ï¿½ï¿½Ëµï¿½ï¿½ï¿½ï¿½ï¿½ï¿½
  615           *  ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ø£ï¿½ï¿½ï¿½
  616           *  ï¿½Þ¸ï¿½Ê±ï¿½ä£º
  617           *  ï¿½ï¿½    ×¢ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½2ï¿½ï¿½ï¿½ï¿½ï¿½
  618           ï¿½ï¿½×¢ï¿½ï¿½ï¿½ï¿½ï¿½î¡¿×¢ï¿½â£¬Ò»ï¿½ï¿½Òªï¿½Ôµï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½
  619           Ê¹ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ä¸ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ì£ï¿½
  620           1.ï¿½ï¿½Ê¹ï¿½ï¿½ï¿½ï¿½ï¿½Ã±ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Øµï¿½Ñ¹ï¿½ï¿½ï¿½ï¿½Ø±ï¿½Ö¤ï¿½ï¿½Øµï¿½Ñ¹ï¿½ï¿½7Vï¿½ï¿½ï¿½
             -Ï£ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ó¦ï¿½ï¿½
  621           2.ï¿½Óºï¿½Ä¸ï¿½åµ½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Åºï¿½ï¿½ß¼ï¿½ï¿½ï¿½Ô´ï¿½ß£ï¿½
  622           3.ï¿½Óºï¿½ï¿½ï¿½ï¿½ï¿½ï¿½åµ½ï¿½ï¿½ï¿½ï¿½Äµï¿½ï¿½ß£ï¿½
  623           4.ï¿½ï¿½Ð´ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ð£ï¿½È·ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½×ªï¿½ï¿½ï¿½ó£¬¿ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½
             -ï¿½ï¿½ï¿½ï¿½Ô´ï¿½ï¿½ï¿½Ø£ï¿½
  624           5.ï¿½ï¿½ï¿½ï¿½K0/K1È·ï¿½ï¿½ï¿½ï¿½ï¿½×ªï¿½ï¿½ï¿½Ù¶È¼ï¿½ï¿½ï¿½ï¿½ï¿½
  625           6.ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ö·ï¿½×ªï¿½ï¿½ï¿½ï¿½ï¿½ï¿½K1ï¿½ï¿½ï¿½ï¿½ï¿½Øµï¿½ï¿½ï¿½Ä£Ê½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ö±ï¿½Ó¹Ø±
             -ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ô´ï¿½ï¿½
  626           *************************************************************************/
  627          void Test_Motor_Hardware(void)
  628          {
  629   1          static int16 motor_duty = 3000;
  630   1          lcd_clear(YELLOW); // ï¿½ï¿½Ê¼ï¿½ï¿½ï¿½ï¿½
  631   1          lcd_showstr(2, 0, "Test_Motor_Hardware:");
  632   1          init_PWM(MOTOR_MODE_SELECT);
  633   1      
  634   1          while (1)
  635   1          {
  636   2              if (!READ_GPIO(KEY1)) // ï¿½ï¿½ï¿½ï¿½KEY1ï¿½ï¿½   ï¿½ï¿½ï¿½Öµï¿½ï¿½ï¿½ï¿½ï¿½×ª
  637   2              {
  638   3                  go_motor(motor_duty, 0);
  639   3                  lcd_showstr(0, 4, "Left  Front"); // ï¿½Ö·ï¿½ï¿½ï¿½ï¿½ï¿½Ê¾
  640   3              }
  641   2              if (!READ_GPIO(KEY3)) // ï¿½ï¿½ï¿½ï¿½KEY2ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Í¬Ê±ï¿½ï¿½×ª
  642   2              {
  643   3                  go_motor(-motor_duty, -motor_duty);
  644   3                  lcd_showstr(0, 4, "All  Black"); // ï¿½Ö·ï¿½ï¿½ï¿½ï¿½ï¿½Ê¾
  645   3              }
  646   2              if (!READ_GPIO(KEY2)) // ï¿½ï¿½ï¿½ï¿½KEY3ï¿½ï¿½  ï¿½ï¿½ï¿½Öµï¿½ï¿½ï¿½ï¿½ï¿½×ª
C251 COMPILER V5.60.0,  debug                                                              27/05/25  18:37:09  PAGE 12  

  647   2              {
  648   3                  go_motor(0, motor_duty);
  649   3                  lcd_showstr(0, 4, "Right Front"); // ï¿½Ö·ï¿½ï¿½ï¿½ï¿½ï¿½Ê¾
  650   3              }
  651   2              if ((READ_GPIO(KEY1)) && (READ_GPIO(KEY2)) && (READ_GPIO(KEY3)))
  652   2                  go_motor(0, 0);
  653   2              TiaoCan_DelayMs(100);
  654   2          }
  655   1      }
  656          
  657          /****************************ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½*********************************************
  658           *  ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Æ£ï¿½void Test_Electric_Hardware (void)
  659           *  ï¿½ï¿½ï¿½ï¿½Ëµï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ôµï¿½Åµï¿½ï¿½Ó²ï¿½ï¿½
  660           *  ï¿½ï¿½ï¿½ï¿½Ëµï¿½ï¿½ï¿½ï¿½ï¿½ï¿½
  661           *  ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ø£ï¿½ï¿½ï¿½
  662           *  ï¿½ï¿½    ×¢ï¿½ï¿½
  663           ï¿½ï¿½×¢ï¿½ï¿½ï¿½ï¿½ï¿½î¡¿
  664           *************************************************************************/
  665          void Test_Electric_Hardware(void)
  666          {
  667   1          char txt[16];
  668   1          ips114_clear(YELLOW); // ï¿½ï¿½Ê¼ï¿½ï¿½ï¿½ï¿½
  669   1          ips114_showstr(2, 0, "Test_Electric_Hardware:");
  670   1          ADC_int();
  671   1          while (1)
  672   1          {
  673   2              //                  if (!READ_GPIO(KEY1)) //ï¿½ï¿½ï¿½ï¿½KEY1ï¿½ï¿½
  674   2              //        {
  675   2              lcd_showstr(2, 1, "Normalize_Deal...."); // ï¿½Ö·ï¿½ï¿½ï¿½ï¿½ï¿½Ê¾
  676   2              ADC_Collect();                           // ï¿½ï¿½Ð²ï¿½Öµ
  677   2      
  678   2              sprintf(txt, "adc0= %05d", adc_value[0]);
  679   2              lcd_showstr(1, 2, txt); // ï¿½ï¿½Ê¾
  680   2              sprintf(txt, "adc1= %05d", adc_value[1]);
  681   2              lcd_showstr(1, 3, txt); // ï¿½ï¿½Ê¾
  682   2              sprintf(txt, "adc2= %05d", adc_value[2]);
  683   2              lcd_showstr(1, 4, txt); // ï¿½ï¿½Ê¾
  684   2              sprintf(txt, "adc3= %05d", adc_value[3]);
  685   2              lcd_showstr(1, 5, txt); // ï¿½ï¿½Ê¾
  686   2              //        }
  687   2              if (!READ_GPIO(KEY2)) // ï¿½ï¿½ï¿½ï¿½KEY2ï¿½ï¿½
  688   2              {
  689   3                  lcd_showstr(2, 1, "GYH_Normalize_Deal...."); // ï¿½Ö·ï¿½ï¿½ï¿½ï¿½ï¿½Ê¾
  690   3                  ADC_Collect();                               // ï¿½ï¿½Ð²ï¿½Öµ
  691   3                  Data_current_analyze();                      // ï¿½ï¿½ï¿½Öµï¿½ï¿½Ò»ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½
  692   3                  Current_Dir = Cha_bi_he(Left_Adc, Right_Adc, 100);
  693   3      
  694   3                  sprintf(txt, "adc0= %05d", Left_Adc);
  695   3                  lcd_showstr(1, 2, txt); // ï¿½ï¿½Ê¾
  696   3                  sprintf(txt, "adc1= %05d", Left_Shu_Adc);
  697   3                  lcd_showstr(1, 3, txt); // ï¿½ï¿½Ê¾
  698   3                  sprintf(txt, "adc2= %05d", Right_Shu_Adc);
  699   3                  lcd_showstr(1, 4, txt); // ï¿½ï¿½Ê¾
  700   3                  sprintf(txt, "adc3= %05d", Right_Adc);
  701   3                  lcd_showstr(1, 5, txt); // ï¿½ï¿½Ê¾
  702   3                  sprintf(txt, "Current_Dir= %05d", Current_Dir);
  703   3                  lcd_showstr(1, 6, txt); // ï¿½ï¿½Ê¾
  704   3              }
  705   2          }
  706   1      }
  707          /****************************ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½*********************************************
  708           *  ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Æ£ï¿½void Test_Encoder(void)
  709           *  ï¿½ï¿½ï¿½ï¿½Ëµï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ô±ï¿½ï¿½ï¿½ï¿½ï¿½
  710           *  ï¿½ï¿½ï¿½ï¿½Ëµï¿½ï¿½ï¿½ï¿½ï¿½ï¿½
  711           *  ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ø£ï¿½ï¿½ï¿½
  712           *  ï¿½Þ¸ï¿½Ê±ï¿½ä£º
C251 COMPILER V5.60.0,  debug                                                              27/05/25  18:37:09  PAGE 13  

  713           *  ï¿½ï¿½    ×¢ï¿½ï¿½
  714           ï¿½ï¿½×¢ï¿½ï¿½ï¿½ï¿½ï¿½î¡¿
  715           *************************************************************************/
  716          void Test_Encoder(void)
  717          {
  718   1          char txt[16];
  719   1          encoder_init();    // ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ê¼ï¿½ï¿½
  720   1          lcd_clear(YELLOW); // ï¿½ï¿½Ê¼ï¿½ï¿½ï¿½ï¿½
  721   1          lcd_showstr(2, 0, "Test_Encoder:");
  722   1          while (1)
  723   1          {
  724   2              speed_measure();
  725   2              delay_ms(50);
  726   2              sprintf(txt, "Left_Speed  = %05d", left_speed);
  727   2              lcd_showstr(1, 3, txt); // ï¿½ï¿½Ê¾
  728   2              sprintf(txt, "Right_Speed = %05d", right_speed);
  729   2              lcd_showstr(1, 4, txt); // ï¿½ï¿½Ê¾
  730   2              sprintf(txt, "Real_Speed = %05d", real_speed);
  731   2              lcd_showstr(1, 5, txt); // ï¿½ï¿½Ê¾
  732   2          }
  733   1      }


Module Information          Static   Overlayable
------------------------------------------------
  code size            =      3768     ------
  ecode size           =    ------     ------
  data size            =    ------     ------
  idata size           =    ------     ------
  pdata size           =    ------     ------
  xdata size           =    ------     ------
  xdata-const size     =    ------     ------
  edata size           =        27        172
  bit size             =    ------     ------
  ebit size            =    ------     ------
  bitaddressable size  =    ------     ------
  ebitaddressable size =    ------     ------
  far data size        =    ------     ------
  huge data size       =    ------     ------
  const size           =    ------     ------
  hconst size          =       626     ------
End of Module Information.


C251 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
