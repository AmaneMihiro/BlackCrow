C251 COMPILER V5.60.0,  main                                                               26/05/25  22:51:45  PAGE 1   


C251 COMPILER V5.60.0, COMPILATION OF MODULE main
OBJECT MODULE PLACED IN .\Out_File\main.obj
COMPILER INVOKED BY: d:\Keil_v5\C251\BIN\C251.EXE ..\USER\src\main.c XSMALL INTR2 WARNINGLEVEL(3) OPTIMIZE(5,SPEED) BROW
                    -SE INCDIR(..\..\Libraries\libraries;..\..\Libraries\seekfree_libraries;..\..\Libraries\seekfree_peripheral;..\CODE;..\US
                    -ER\inc;..\USER\src;..\..\vofa+) DEBUG PRINT(.\Out_File\main.lst) OBJECT(.\Out_File\main.obj) 

stmt  level    source

    1          #include "vofa.h"
    2          #include "headfile.h"
    3          #include "fuse.h"
    4          void main()
    5          {
    6   1          DisableGlobalIRQ(); // å…³é—­æ€»ä¸­æ–­
    7   1          board_init();       // åˆå§‹åŒ–å¯„å­˜å™¨,å‹¿åˆ é™¤æ­¤å¥ä»£ç 
    8   1          delay_ms(800);      // ç¡¬ä»¶ç¨å¾®å»¶æ—¶ä¸€ä¸‹
    9   1      
   10   1          //  lcd_init();
   11   1          //  ips114_init_simspi();
   12   1          ips114_init(); // 1.14å¯¸æ¶²æ™¶å±åˆå§‹åŒ–
   13   1      
   14   1          ADC_int();                                                    // ADCé‡‡é›†åˆå§‹åŒ–
   15   1          ips114_showstr(0, 0, (unsigned char *)"Electromagnetic-Car"); // å­—ç¬¦ä¸²æ˜¾ç¤º
   16   1          ips114_showstr(0, 1, "interlize...");
   17   1          //  ips114_showstr_simspi(0,0,(unsigned char*)"Electromagnetic-Car");
   18   1          //  ips114_showstr_simspi(0,1,"interlize...");
   19   1          delay_ms(500);
   20   1          //  init_Steer_PWM();                                          //èˆµæœºåˆå§‹åŒ–
   21   1          init_PWM(MOTOR_MODE_SELECT); // åˆå§‹åŒ–DRVé©±åŠ¨æ–¹å¼ï¼ˆ1-DRV/0-BTNï¼‰
   22   1          encoder_init();              // ç¼–ç å™¨åˆå§‹åŒ–
   23   1          //  uart_init(UART_4, UART4_RX_P02, UART4_TX_P03, 115200, TIM_2);//åˆå§‹åŒ–æ— çº¿ä¸²å£
   24   1          //  pwm_init(PWMB_CH4_P77, 50, 750);                         //åˆå§‹åŒ–æ— åˆºç”µæœº20%å ç©ºæ¯”
   25   1          //  pwm_init(PWMB_CH3_P33, 50, 750);                         //(1.2ms/20ms * 10000)ï¼Œ10000æ˜¯PWMçš„æ»
             -¡å ç©ºæ¯”æ—¶å€™çš„å€¼ï¼‰ 10000ä¸ºPWMæœ€å¤§å€¼
   26   1          delay_ms(500);                             // å»¶æ—¶è®©æ— åˆ·ç”µæœºå…ˆè½¬èµ·æ¥
   27   1          gpio_mode(Reed_Switch_Pin, GPI_IMPEDANCE); // åœè½¦è¯†åˆ«çš„å¹²ç°§ç®¡IOåˆå§‹åŒ–
   28   1          PID_int();                                 // PIDå‚æ•°åˆå§‹åŒ–
   29   1          ips114_showstr(0, 2, "icm20602_int...");
   30   1          icm20602_init();
   31   1      
   32   1          pit_timer_ms(TIM_1, 5);           // åˆå§‹åŒ–å®šæ—¶å™¨1ä½œä¸ºå‘¨æœŸæ€§è§¦å‘æºï¼Œ5MSè¿›ä¸€æ¬¡ä¸­æ–­
   33   1          NVIC_SetPriority(TIMER1_IRQn, 3); // è®¾ç½®å®šæ—¶å™¨1çš„ä¼˜å…ˆçº§ä¸º 3 çº§ï¼ˆæœ€é«˜çº§ï¼‰
   34   1      
   35   1          gpio_mode(P6_7, GPO_PP); // èœ‚é¸£å™¨åˆå§‹åŒ–ï¼ˆæ”¹èœ‚é¸£å™¨å¼•è„šä¹Ÿè¦æ”¹è¿™ä¸ªå¯¹åº”çš„åˆå§‹åŒ–ï
             -¼‰
   36   1          BUZZ_DiDiDi(250);        // èœ‚é¸£å™¨æ»´ä¸€ä¸‹
   37   1      
   38   1          ips114_showstr(0, 6, "intall_intok...");
   39   1          delay_ms(500);
   40   1          ips114_clear(BLUE);
   41   1      
   42   1          //  while(adc_valueM<6)
   43   1          //  {
   44   1          ////                        ç”µæºç”µå‹æ˜¾ç¤º
   45   1          //                  ips114_showstr(140,0,"Value:");
   46   1          //                  ips114_showfloat(190,0,adc_valueM,2,2);
   47   1          //  }
   48   1      
   49   1          //   Key_Scan_Deal();      //æŒ‰é”®è°ƒå‚//
   50   1          EnableGlobalIRQ(); // åˆå§‹åŒ–å®Œæ¯•ï¼Œå¼€å¯æ€»ä¸­æ–­
   51   1          //                  ä¸²å£è°ƒè¯•
   52   1          uart_init(UART_2, UART2_RX_P10, UART2_TX_P11, 115200, TIM_2);//åˆå§‹åŒ–ä¸²å£
   53   1      
   54   1          /****ä¸‹é¢çš„æµ‹è¯•å‡½æ•°åªç”¨æµ‹è¯•ç”¨ï¼Œæµ‹è¯•ç»“æŸåæ³¨é‡Šå…³é—­ï¼Œä¸€æ¬¡åªå…è®¸å¼€ä¸€ä¸ªæµ‹
             -è¯•å‡½æ•°ï¼ï¼******/
C251 COMPILER V5.60.0,  main                                                               26/05/25  22:51:45  PAGE 2   

   55   1          //  Test_Servo_Hardware();//æµ‹è¯•èˆµæœºè°ƒèŠ‚
   56   1          //  Test_Motor_Hardware();//è°ƒè¯•ç”µæœºä½¿ç”¨
   57   1          //  Test_Electric_Hardware();//æµ‹è¯•ç”µç£ç”µæ„Ÿé‡‡é›†
   58   1          //  Test_Encoder();//æµ‹è¯•ç¼–ç å™¨é‡‡é›†//
   59   1          /*********************************************************************************/
   60   1      
   61   1          while (1)
   62   1          {
   63   2              //                      ä¸²å£è°ƒè¯•
   64   2      
   65   2              //                      printf("%d,%d,%d\n",aim_speed,left_real_speed,right_real_speed);
   66   2      
   67   2              //       Strategy_Slect();     //æ‹¨ç å¼€å…³ç­–ç•¥é€‰æ‹© 1--æ˜¾ç¤ºç”µæ„Ÿå€¼å’Œèµ›é“åå·® 2--é€‰æ‹©å
             -·¦å³å‡ºåº“ 3--é€‰æ‹©æ˜¯å¦å…¥ç¯
   68   2              //       Handle_Barn_Out(Library_selection);     //æ‰§è¡Œå‡ºåº“å‡½æ•°åflag_startæ ‡å¿—ä½ç½®ä¸€æ‰ä¼
             -šè¿›ä¸­æ–­
   69   2      
   70   2              //                      åœè½¦æ˜¾ç¤º
   71   2              //                      Reed();
   72   2              //                      ips114_showint8(0,6,Reed_Switch_Pin);
   73   2              //                      ips114_showint8(0,7,flag_end);
   74   2      
   75   2              //     Roundabout_debugshow();//ç¯å²›è°ƒè¯•å±å¹•æ˜¾ç¤ºï¼ˆè°ƒè¯•ç¯å²›æ—¶æ‰“å¼€ï¼‰
   76   2              // Speed_debugshow();     //é€Ÿåº¦ç¯è°ƒè¯•å±å¹•æ˜¾ç¤ºï¼ˆè°ƒè¯•é€Ÿåº¦ç¯æ—¶æ‰“å¼€ï¼Œé€Ÿåº¦ç¯å»º
             -è®®ç”¨ä¸Šä½æœºçœ‹æ³¢å½¢ï¼‰
   77   2              //                datasend();          //ä¸Šä½æœºå‘é€æ•°æ®
   78   2      
   79   2              ////                    é€Ÿåº¦æ˜¾ç¤º
   80   2              // ips114_showint16(50, 0, left_real_speed);
   81   2              // ips114_showint16(50, 1, right_real_speed);
   82   2              // ips114_showint16(50, 2, real_speed);
   83   2              // ips114_showint16(50, 4, aim_speed);
   84   2              // //
   85   2              // //
   86   2              // //
   87   2              //          ç”µæ„Ÿæ˜¾ç¤º
   88   2              // ips114_showint16(0, 0, Left_Adc);
   89   2              // ips114_showint16(0, 1, Left_Shu_Adc);
   90   2              // ips114_showint16(0, 2, Right_Shu_Adc);
   91   2              // ips114_showint16(0, 3, Right_Adc);
   92   2              // ips114_showint16(0, 0, adc_value[0]);
   93   2              // ips114_showint16(0, 1, adc_value[1]);
   94   2              // ips114_showint16(0, 2, adc_value[2]);
   95   2              // ips114_showint16(0, 3, adc_value[3]);
   96   2      
   97   2              // ////                 æµ‹è·æ˜¾ç¤ºï¼ˆåé¢æ³¨é‡Šï¼‰
   98   2              // //                   ips114_showuint16(100,5,dl1a_distance_mm);
   99   2              // //                   ips114_showuint16(100,1,flag_obstacle);
  100   2              // //
  101   2              // ////                 èµ›é“åå·®æ˜¾ç¤º
  102   2              // ips114_showfloat(0, 5, Current_Dir, 2, 1); // æ˜¾ç¤ºå°ç‚¹æ•°   æ•´æ•°æ˜¾ç¤º2ä½   å°æ•°æ˜¾ç¤
             -º1ä½
  103   2              // //
  104   2              // //
  105   2              //                      ç”µæºç”µå‹æ˜¾ç¤º
  106   2              // ips114_showstr(140, 0, "Value:");
  107   2              // ips114_showfloat(190, 0, adc_valueM, 2, 2);
  108   2              vofa_demo2((float)left_real_speed, (float)right_real_speed);
  109   2          }
  110   1      }


Module Information          Static   Overlayable
------------------------------------------------
  code size            =       225     ------
  ecode size           =    ------     ------
  data size            =    ------     ------
C251 COMPILER V5.60.0,  main                                                               26/05/25  22:51:45  PAGE 3   

  idata size           =    ------     ------
  pdata size           =    ------     ------
  xdata size           =    ------     ------
  xdata-const size     =    ------     ------
  edata size           =    ------     ------
  bit size             =    ------     ------
  ebit size            =    ------     ------
  bitaddressable size  =    ------     ------
  ebitaddressable size =    ------     ------
  far data size        =    ------     ------
  huge data size       =    ------     ------
  const size           =    ------     ------
  hconst size          =        65     ------
End of Module Information.


C251 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
